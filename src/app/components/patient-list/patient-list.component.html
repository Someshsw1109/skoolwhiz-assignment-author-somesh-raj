<div class="container mt-4">
    <h2 class="mb-4">Patient Management System</h2>
    
    <div class="d-flex justify-content-between align-items-center mb-4">
      <button class="btn btn-primary" (click)="addPatient()">Add New Patient</button>
    </div>
    
    <div class="row mb-4">
      <div class="col-md-6">
        <div class="input-group">
          <input 
            type="text" 
            class="form-control" 
            placeholder="Search patients..." 
            [(ngModel)]="searchQuery" 
            (input)="searchPatients()">
          <button 
            class="btn btn-outline-secondary" 
            type="button" 
            (click)="searchPatients()">
            <i class="bi bi-search"></i>
          </button>
        </div>
      </div>
      
      <div class="col-md-4">
        <select 
          class="form-select" 
          [(ngModel)]="selectedBloodGroup" 
          (change)="filterByBloodGroup()">
          <option *ngFor="let group of bloodGroups" [value]="group">{{ group }}</option>
        </select>
      </div>
      
      <div class="col-md-2">
        <button class="btn btn-success w-100" (click)="exportData()">
          <i class="bi bi-download me-1"></i> Export
        </button>
      </div>
    </div>
    
    <div class="card">
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-striped table-hover mb-0">
            <thead class="table-dark">
              <tr>
                <th>ID</th>
                <th>Name</th>
                <th>UID</th>
                <th>Phone</th>
                <th>Age</th>
                <th>Gender</th>
                <th>Blood Group</th>
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let patient of patients">
                <td>{{ patient.id }}</td>
                <td>{{ patient.name }}</td>
                <td>{{ patient.uid }}</td>
                <td>{{ patient.phone }}</td>
                <td>{{ patient.age }}</td>
                <td>{{ patient.gender }}</td>
                <td>{{ patient.bloodGroup }}</td>
                <td>
                  <div class="btn-group" role="group">
                    <button class="btn btn-sm btn-info" (click)="viewPatientDetails(patient)">
                      <i class="bi bi-eye"></i>
                    </button>
                    <button class="btn btn-sm btn-warning" (click)="editPatient(patient)">
                      <i class="bi bi-pencil"></i>
                    </button>
                    <button class="btn btn-sm btn-danger" (click)="deletePatient(patient)">
                      <i class="bi bi-trash"></i>
                    </button>
                  </div>
                </td>
              </tr>
              <tr *ngIf="patients.length === 0">
                <td colspan="8" class="text-center py-4">
                  <div *ngIf="loading">Loading patients...</div>
                  <div *ngIf="!loading">No patients found. Add a new patient to get started.</div>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
    
    <div class="mt-4 text-center text-muted">
      <small>&copy; {{ 2025 }} Patient Management System</small>
    </div>
  </div>